let sux=(s=>{let e=1e3,r=new Map,o=new Map,a=new Map,i=(s._compMap=r,s._dataMap=o,s._drawMap=a,s._createdDuringDraw=[],s.isElement=e=>e instanceof Element||e instanceof HTMLDocument,s.genId=()=>(++e).toString(36),s.get=e=>r.get(e),s.element=e=>{if(e)return(e="string"==typeof e?r.get(e):e).element||(e.element=document.querySelector('[sux="'+e.suxId+'"]'))},s.jq=e=>{if(e)return(e="string"==typeof e?r.get(e):e)._jq||(window.$?e._jq=$(s.element(e)):void 0)},s.register=n=>{n.suxId||(n.suxId=s.genId()),r.has(n.suxId)||(r.set(n.suxId,n),a.set(n.draw,n),s.when(n),n.data?.length?n.data.forEach(t=>{if("object"==typeof t&&!(t instanceof Date)){let e=o.get(t);e?e.push(n):o.set(t,e=[n])}}):n.data=[],s._createdDuringDraw.push(n))},e=>{let t=null;var n=e.findIndex(e=>"function"==typeof e);if(-1<n){var r=e[n];e.splice(n,1),t={suxId:s.genId(),draw:r,data:e}}else{if((n=e.findIndex(e=>"object"==typeof e&&e.draw))<-1)throw new Error("No component or draw function was passed to the mount.");t=e[n],e.splice(n,1)}return t}),n=(s.mount=(...e)=>{var t=e.findIndex(e=>"string"==typeof e||s.isElement(e));let n=null;if(n=-1<t&&(n=e[t],e.splice(t,1),"string"==typeof n)?document.getElementById(n):n)return(t=n.getAttribute("sux"))&&(s.clearKids(n),t=r.get(t))&&(t.cleared?.(),s.youDontSay(t)),(t=i(e)).inny=!0,s._createdDuringDraw=[t],s.register(t),n.setAttribute("sux",t.suxId),e=n.innerHTML=t.draw(...t.data),s.settle(),e;throw new Error("Element or id of element required to mount.")},s.inject=(...e)=>{e=i(e);return e.outy=!0,s.register(e),e.draw(...e.data).replace(">",` sux="${e.suxId}">`)},s.settle=()=>{var e=[...s._createdDuringDraw];s._createdDuringDraw=[],e.forEach(e=>e.mounted?e.mounted():null)},s.repaint=t=>{if(t){"string"==typeof t&&(t=r.get(t)),s.clearKids(t);var n=s.element(t);if(n){s._createdDuringDraw=[];let e=t.draw(...t.data);t.outy?(e=e.replace(">",` sux="${t.suxId}">`),n.outerHTML=e,delete t.element):n.innerHTML=e,s._createdDuringDraw.forEach(e=>e.mounted?e.mounted():null),s._createdDuringDraw=[]}else console.log("Element not found for "+t.suxId)}},s.touchData=t=>{var e;"object"!=typeof t||t instanceof Date||(e=o.get(t))&&e.forEach(e=>{e.dataTouched?e.dataTouched(t):s.repaint(e)})},s.replaceData=(n,r)=>{if(!("object"!=typeof n||n instanceof Date)){if("object"!=typeof r||r instanceof Date)throw new Error("Updating object to basic type is sadpanda.");var e=o.get(n);e&&e.forEach(e=>{var t;e.dataReplace?e.dataReplace(n,r):(-1<(t=e.data.indexOf(n))&&(e.data[t]=r),s.repaint(e))})}},s.clearKids=e=>{let t=null;if(!s.isElement(e))if(e?.suxId)t=s.element(e);else if(!(e="string"!=typeof e?e.suxId:e))return;(t=t||(s.isElement(e)?e:sux.element(e)))&&t.querySelectorAll("[sux]").forEach(e=>{e=e.getAttribute("sux");let n=r.get(e);n&&(r.delete(e),a.delete(n.draw),s.youDontSay(n),n.data?.length&&n.data.forEach(e=>{var t,e=o.get(e);e&&-1<(t=e.indexOf(n))&&e.splice(t,1)}),n.cleared)&&n.cleared()})},s.parent=e=>{if(!e)return null;let t=null,n=null;if(e.suxId?(e=(t=e).suxId,n=s.element(t)):"string"==typeof e&&(t=r.get(e)),t?.parent)return t?.parent;if(n||(s.isElement(e)?n=e:t?.element?n=t?.element:(n=document.querySelector('[sux="'+e+'"]'),t&&(t.element=n))),!(n=n||document.getElementById(e)))return null;for(n=n&&n.parentElement;n&&!n.getAttribute("sux");)n=n.parentElement;return n?((e=r.get(n.getAttribute("sux"))).element=n,t&&(t.parent=e),e):(console.log("PARENT NOT FOUND!"),null)},s.registerFactory=(e,t)=>{s.factories.set(e,(...e)=>{e=t(...e);return s.register(e),e})},s.getFactory=async(...e)=>{e=e.shift();return s.factories.has(e)?s.factories.get(e):s.loadPromises[e]||(s.loadPromises[e]=s._loadBundle(e))},{});return s.event=e=>{var t=s.genId();return n[t]=e,"sux._event('"+t+"')"},s._event=e=>{n[e]()},s.eventAttr=(e,t)=>" "+e+'="'+s.event(t)+'" ',s.onclick=e=>s.eventAttr("onclick",e),s.onchange=e=>s.eventAttr("onchange",e),s.onsubmit=e=>s.eventAttr("onsubmit",e),s.onmouseover=e=>s.eventAttr("onmouseover",e),s.onmouseout=e=>s.eventAttr("onmouseout",e),s._sayWhenListeners={},s._whenObjects=new Map,s.when=(t,n)=>{if("string"==typeof t){let e=s._sayWhenListeners[t];(e=e||(s._sayWhenListeners[t]=[])).push(n)}else if("object"==typeof t){let n=t,r=[],e=null;(e="Object"===t.constructor?.name?Object.keys(t):Object.getOwnPropertyNames(Object.getPrototypeOf(t)))?.forEach(t=>{var e;4<t.length&&t.startsWith("when")&&(e={k:t,h:(...e)=>n[t](...e)},r.push(e),s.when(t.substring(4),e.h))}),r.length&&s._whenObjects.set(n,r)}},s.say=(e,...t)=>{(s._sayWhenListeners[e]||[]).forEach(e=>e(...t))},s.youDontSay=(e,t)=>{var n;e&&("string"==typeof e?(n=s._sayWhenListeners[e])&&(-1<(t=n.indexOf(t))&&n.splice(t,1),0===n.length)&&delete s._sayWhenListeners[e]:"object"==typeof e&&(t=s._whenObjects.get(e))&&(console.log("clearing handlers for object..."),t.forEach(e=>{s.youDontSay(e.k,e.h)}),s._whenObjects.delete(e)))},s.bodySnatch=(e,t)=>{for(var n in e)delete e[n];Object.assign(e,t),s.touchData(e)},s})({});(s=>{s.http=(s,o,a,i)=>new Promise((t,n)=>{var e,r={method:o,headers:{"Content-Type":"application/json",...i||{}}};"POST"===o?r.body=JSON.stringify(a||{}):"GET"===o&&a&&(e=Object.keys(a).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(a[e])).join("&"),s=(s.includes("?")?"&":"?")+e),fetch(s,r).then(async e=>{(e.ok?t:n)(await e.json())})}),s.httpPost=async(e,t,n,r)=>{return!e.endsWith("/")&&t&&(e+="/"),s.http(e+(t||""),"POST",n,r)},s.httpGet=async(e,t,n,r)=>{return!e.endsWith("/")&&t&&(e+="/"),s.http(e+(t||""),"GET",n,r)},s.setupApi=t=>{Object.keys(t).forEach(e=>{let r=t[e];s[e]||(s[e]={post:async(e,t,n)=>sux.httpPost(r.hostPath,e,t,n),get:async(e,t,n)=>sux.httpGet(r.hostPath,e,t,n)})})},console.log("LOADED HTTP??")})(sux||window.sux||{}),(s=>{s.bundles={},s.loadPromises={},s.factories=new Map,s.requestedResources=new Map,s.routes=[],s.siteLoader=null,s.loadScript=n=>{var e=s.requestedResources.get(n);return e||(e=new Promise(e=>{var t=document.createElement("script");t.onload=()=>setTimeout(()=>e(),50),t.type="text/javascript",t.src=n,document.head.appendChild(t)}),s.requestedResources.set(n,e)),e},s.loadStylesheet=e=>{var t;s.requestedResources.has(e)||(s.requestedResources.set(e,Promise.resolve()),(t=document.createElement("link")).rel="stylesheet",t.href=e,document.head.appendChild(t))},s._loadBundle=async e=>{var t=s.bundles[e];t.style&&s.loadStylesheet(t.style);let n=t.source;if(Array.isArray(n)||(n=[n]),await Promise.allSettled(n.map(e=>s.loadScript(e))),s.factories.has(e))return s.factories.get(e);throw new Error("Bundle did not register a factory.")},s.loadBundles=n=>{s.bundles=n;let t=Object.keys(n);t.forEach(e=>{var t=n[e];t?.route&&(t.name=e,s.routes.push(t))}),s.siteLoader||(s.siteLoader=setTimeout(async()=>{for(var e of t)await s._loadBundle(e)},1e3))},s.go=e=>{document.location="#"+e},s.onclickGo=e=>s.eventAttr("onclick",()=>s.go(e)),s.route=async t=>{"#"===(t=(t=t&&"object"==typeof t&&t.newURL?window.location.hash:t)||(window.location.hash||"#home")+"")[0]&&(t=t.substring(1));var e=s.routes.find(e=>e.route.test(t));s.routes.forEach(e=>e.route.lastIndex=0),e?s.say("Routing",t,e):console.log("No route found for "+t+"!")},s.parseQstring=e=>{if(!e){if(1===(e=(document.location+"").split("#")[0].split("?")).length)return{};e=e[1]}var t=e=>decodeURIComponent((e+"").replace(/\+/g,"%20")),n=e.split("&"),r={};for(let e=0;e<n.length;e++){var s=n[e].split("="),o=t(s[0]),a=t(s[1]||"");r[s[0]]?Array.isArray(r[o])?r[o].push(a):r[o]=[r[o],a]:r[o]=a}return r};class t{constructor({routeNames:e,loadingDraw:t,factoryRunner:n,showFunc:r,hideFunc:s}){this.namesToCareAbout={},(e||[]).forEach(e=>this.namesToCareAbout[e]=!0),this.loadingDraw=t,this.factoryRunner=n,this.showFunc=r,this.hideFunc=s,this.running=!1,this.stagedElements={}}mounted(){this.running=!0,s.repaint(this)}async show(r){if(this.namesToCareAbout[r]){let n=null;if(this.stagedElements[r])n=this.stagedElements[r];else{(n=document.createElement("div")).style.display="none",s.element(this).appendChild(n);let e=s.getFactory(r),t=(e instanceof Promise&&(e=await e),this.factoryRunner(r,e));t instanceof Promise&&(t=await t),s.mount(n,t),this.stagedElements[r]=n}this.currentElement&&(this.currentElement.style.display="none",this.hideFunc?.(s.get(this.currentElement.getAttribute("sux")))),n&&(n.style.display="block");r=s.get(n.getAttribute("sux"));r&&this.showFunc?.(r),this.currentElement=n}}draw(){return this.running?this.inny?"":`<div>${this.loadingDraw()}</div>`:this.loadingDraw()}}s.registerFactory("comp-swapper",e=>new t(e)),s.registerFactory("route-triggered-swapper",async e=>{return new class extends t{constructor(e){super(e),this.factoryRunner=async()=>{},this.showFunc=e=>e?.routeChanged?.(this.newHashPath,this.newRoute),this.hideFunc=e=>e?.routeHiding?.()}async whenRouting(n,r){this.factoryRunner=async(e,t)=>t(n,r),this.newHashPath=n,this.newRoute=r,this.show(r.name)}}(e)}),window.addEventListener("hashchange",s.route),console.log("LOADED ROUTING??")})(sux||window.sux||{});