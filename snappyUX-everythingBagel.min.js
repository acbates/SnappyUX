let sux=(a=>{Array.prototype.rip=function(t){var n=[];for(let e=this.length-1;0<=e;e--)t(this[e])&&(n.push(this[e]),this.splice(e,1));return n.reverse()},Array.prototype.ripOne=function(t){for(let e=this.length-1;0<=e;e--){var n;if(t(this[e]))return n=this[e],this.splice(e,1),n}return null};let e=1e3,r=new Map,s=new Map,o=new Map,i=(a._compMap=r,a._dataMap=s,a._drawMap=o,a._createdDuringDraw=[],a.isElement=e=>e instanceof Element||e instanceof HTMLDocument,a.genId=()=>(++e).toString(36),a.get=e=>r.get(e),a.element=e=>{if(e)return(e="string"==typeof e?r.get(e):e).element||(e.element=document.querySelector('[sux="'+e.suxId+'"]'))},a.jq=e=>{if(e)return(e="string"==typeof e?r.get(e):e)._jq||(window.$?e._jq=$(a.element(e)):void 0)},a.register=n=>{n.suxId||(n.suxId=a.genId()),r.has(n.suxId)||(r.set(n.suxId,n),o.set(n.draw,n),a.when(n),n.data?.length?n.data.forEach(t=>{if("object"==typeof t&&!(t instanceof Date)){let e=s.get(t);e?e.push(n):s.set(t,e=[n])}}):n.data=[],a._createdDuringDraw.push(n))},e=>{let t=null;var n=e.findIndex(e=>"function"==typeof e);if(-1<n){var r=e[n];e.splice(n,1),t={suxId:a.genId(),draw:r,data:e}}else{if((n=e.findIndex(e=>"object"==typeof e&&e.draw))<-1)throw new Error("No component or draw function was passed to the mount.");t=e[n],e.splice(n,1)}return t}),u=(a.mount=(...e)=>{var t=e.findIndex(e=>"string"==typeof e||a.isElement(e));let n=null;if(n=-1<t&&(n=e[t],e.splice(t,1),"string"==typeof n)?document.getElementById(n):n)return(t=n.getAttribute("sux"))&&(a.clearKids(n),t=r.get(t))&&(t.cleared?.(),a.youDontSay(t)),(t=i(e)).inny=!0,a._createdDuringDraw=[t],a.register(t),n.setAttribute("sux",t.suxId),e=n.innerHTML=t.draw(...t.data),a.settle(),e;throw new Error("Element or id of element required to mount.")},a.inject=(...e)=>{e=i(e);return e.outy=!0,a.register(e),e.draw(...e.data).replace(">",` sux="${e.suxId}">`)},a.settle=()=>{var e=[...a._createdDuringDraw];a._createdDuringDraw=[],e.forEach(e=>e.mounted?e.mounted():null)},a.repaint=t=>{if(t){"string"==typeof t&&(t=r.get(t)),a.clearKids(t);var n=a.element(t);if(n){a._createdDuringDraw=[];let e=t.draw(...t.data);t.outy?(e=e.replace(">",` sux="${t.suxId}">`),n.outerHTML=e,delete t.element):n.innerHTML=e,a._runMounts(n),a._createdDuringDraw.forEach(e=>e.mounted?e.mounted():null),a._createdDuringDraw=[],t.repainted?.()}else console.log("Element not found for "+t.suxId)}},a.touchData=t=>{var e;"object"!=typeof t||t instanceof Date||(e=s.get(t))&&e.forEach(e=>{e.dataTouched?e.dataTouched(t):a.repaint(e)})},a.replaceData=(n,r)=>{if(!("object"!=typeof n||n instanceof Date)){if("object"!=typeof r||r instanceof Date)throw new Error("Updating object to basic type is sadpanda.");var e=s.get(n);e&&e.forEach(e=>{var t;e.dataReplace?e.dataReplace(n,r):(-1<(t=e.data.indexOf(n))&&(e.data[t]=r),a.repaint(e))})}},a.clearKids=e=>{let t=null;if(!a.isElement(e))if(e?.suxId)t=a.element(e);else if(!(e="string"!=typeof e?e.suxId:e))return;(t=t||(a.isElement(e)?e:sux.element(e)))&&(a._clearMounts(t),t.querySelectorAll("[sux]").forEach(e=>{e=e.getAttribute("sux");let n=r.get(e);n&&(r.delete(e),o.delete(n.draw),a.youDontSay(n),n.data?.length&&n.data.forEach(e=>{var t,e=s.get(e);e&&-1<(t=e.indexOf(n))&&e.splice(t,1)}),n.cleared)&&n.cleared()}))},a.parent=e=>{if(!e)return null;let t=null,n=null;if(e.suxId?(e=(t=e).suxId,n=a.element(t)):"string"==typeof e&&(t=r.get(e)),t?.parent)return t?.parent;if(n||(a.isElement(e)?n=e:t?.element?n=t?.element:(n=document.querySelector('[sux="'+e+'"]'),t&&(t.element=n))),!(n=n||document.getElementById(e)))return null;for(n=n&&n.parentElement;n&&!n.getAttribute("sux");)n=n.parentElement;return n?((e=r.get(n.getAttribute("sux"))).element=n,t&&(t.parent=e),e):(console.log("PARENT NOT FOUND!"),null)},a.registerFactory=(e,t)=>{a.factories.set(e,(...e)=>{e=t(...e);return a.register(e),e})},a.getFactory=async(...e)=>{e=e.shift();return a.factories.has(e)?a.factories.get(e):a.loadPromises[e]||(a.loadPromises[e]=a._loadBundle(e))},{}),l=(a.event=e=>{var t=a.genId();return u[t]=e,"sux._event('"+t+"', this, event)"},a._event=(e,t,n)=>{u[e](t,n)},a.eventAttr=(e,t)=>" "+e+'="'+a.event(t)+'" ',a.onclick=e=>a.eventAttr("onclick",e),a.onchange=e=>a.eventAttr("onchange",e),a.onsubmit=e=>a.eventAttr("onsubmit",e),a.onmouseover=e=>a.eventAttr("onmouseover",e),a.onmouseout=e=>a.eventAttr("onmouseout",e),a._mountRefs={},a.mountFunc=e=>{var t=a.genId();return a._mountRefs[t]=e,' sux_mref="'+t+'" '},a._runMounts=e=>{(e=e||document).querySelectorAll("[sux_mref]").forEach(e=>{var t,n=e.getAttribute("sux_mref");a._mountRefs[n]&&(t=a._mountRefs[n],delete a._mountRefs[n],e.removeAttribute("sux_mref"),t(e))})},a._clearMounts=e=>{e&&e.querySelectorAll("[sux_mref]").forEach(e=>{var t=e.getAttribute("sux_mref");e.removeAttribute("sux_mref"),delete a._mountRefs[t]})},a.bind=o=>{if(o){let{event:t,draw:e,to:n,from:r}=o;o=e?e():a.mountFunc(n);let s=null;return"string"==typeof t?s=a.eventAttr(t,r):"object"==typeof t&&(s=Object.keys(t).map(e=>a.eventAttr(e,t[e])).join(" ")),o+s}},e=>1===e.length?e[0]:{prop:e.ripOne(e=>"string"==typeof e),obj:e.ripOne(e=>"object"==typeof e)});return a.bindValueChange=(...e)=>{if(e){let{prop:n,obj:r,to:s,from:t}=l(e);return a.bind({event:{onchange:e=>r[n]=t?t(e.value):e.value},to:e=>{var t=r[n];e.value=s?s(t):null==t?"":t}})}},a.bindCheckedChange=(...o)=>{if(o){let{prop:t,obj:n,to:e,from:r}=l(o),s=e?e(n[t]):n[t];return a.bind({event:"onchange",draw:()=>s?" checked ":"",from:e=>n[t]=r?r(e.checked):e.checked})}},a._sayWhenListeners={},a._whenObjects=new Map,a.when=(t,n)=>{if("string"==typeof t){let e=a._sayWhenListeners[t];(e=e||(a._sayWhenListeners[t]=[])).push(n)}else if("object"==typeof t){let n=t,r=[],e=null;(e="Object"===t.constructor?.name?Object.keys(t):Object.getOwnPropertyNames(Object.getPrototypeOf(t)))?.forEach(t=>{var e;4<t.length&&t.startsWith("when")&&(e={k:t,h:(...e)=>n[t](...e)},r.push(e),a.when(t.substring(4),e.h))}),r.length&&a._whenObjects.set(n,r)}},a.say=(e,...t)=>{(a._sayWhenListeners[e]||[]).forEach(e=>e(...t))},a.youDontSay=(e,t)=>{var n;e&&("string"==typeof e?(n=a._sayWhenListeners[e])&&(-1<(t=n.indexOf(t))&&n.splice(t,1),0===n.length)&&delete a._sayWhenListeners[e]:"object"==typeof e&&(t=a._whenObjects.get(e))&&(console.log("clearing handlers for object..."),t.forEach(e=>{a.youDontSay(e.k,e.h)}),a._whenObjects.delete(e)))},a.bodySnatch=(e,t)=>{for(var n in e)delete e[n];Object.assign(e,t),a.touchData(e)},a})({});(s=>{s.http=async(e,t,n,r)=>{r={method:t=t.toUpperCase(),headers:{"Content-Type":"application/json",...r}},n&&("GET"===t&&n&&(e=(e.includes("?")?"&":"?")+new URLSearchParams(n).toString()),"POST"===t)&&n&&(r.body=JSON.stringify(n)),t=await fetch(e,r);if(t.ok)return t.json();throw new Error("HTTP error! status: "+t.status)},s.httpPost=async(e,t,n,r)=>{return!e.endsWith("/")&&t&&(e+="/"),s.http(e+(t||""),"POST",n,r)},s.httpGet=async(e,t,n,r)=>{return!e.endsWith("/")&&t&&(e+="/"),s.http(e+(t||""),"GET",n,r)},s.setupApi=t=>{Object.keys(t).forEach(e=>{let r=t[e];s[e]||(s[e]={post:async(e,t,n)=>sux.httpPost(r.hostPath,e,t,n),get:async(e,t,n)=>sux.httpGet(r.hostPath,e,t,n)})})}})(sux||window.sux||{}),(s=>{s.bundles={},s.loadPromises={},s.factories=new Map,s.requestedResources=new Map,s.routes=[],s.siteLoader=null,s.loadScript=n=>{var e=s.requestedResources.get(n);return e||(e=new Promise(e=>{var t=document.createElement("script");t.onload=()=>setTimeout(()=>e(),50),t.type="text/javascript",t.src=n,document.head.appendChild(t)}),s.requestedResources.set(n,e)),e},s.loadStylesheet=e=>{var t;s.requestedResources.has(e)||(s.requestedResources.set(e,Promise.resolve()),(t=document.createElement("link")).rel="stylesheet",t.href=e,document.head.appendChild(t))},s._loadBundle=async e=>{var t=s.bundles[e];t.style&&s.loadStylesheet(t.style);let n=t.source;if(Array.isArray(n)||(n=[n]),await Promise.allSettled(n.map(e=>s.loadScript(e))),s.factories.has(e))return s.factories.get(e);throw new Error("Bundle did not register a factory.")},s.loadBundles=n=>{s.bundles=n;let t=Object.keys(n);t.forEach(e=>{var t=n[e];t?.route&&(t.name=e,s.routes.push(t))}),s.siteLoader||(s.siteLoader=setTimeout(async()=>{for(var e of t)await s._loadBundle(e)},1e3))},s.go=e=>{document.location="#"+e},s.onclickGo=e=>s.eventAttr("onclick",()=>s.go(e)),s.onclickBack=()=>s.eventAttr("onclick",()=>history.back()),s.route=async t=>{"#"===(t=(t=t&&"object"==typeof t&&t.newURL?window.location.hash:t)||(window.location.hash||"#home")+"")[0]&&(t=t.substring(1));var e=s.routes.find(e=>e.route.test(t));s.routes.forEach(e=>e.route.lastIndex=0),e?s.say("Routing",t,e):console.log("No route found for "+t+"!")},s.parseQstring=e=>{if(!e){if(1===(e=(document.location+"").split("#")[0].split("?")).length)return{};e=e[1]}var t=e=>decodeURIComponent((e+"").replace(/\+/g,"%20")),n=e.split("&"),r={};for(let e=0;e<n.length;e++){var s=n[e].split("="),o=t(s[0]),a=t(s[1]||"");r[s[0]]?Array.isArray(r[o])?r[o].push(a):r[o]=[r[o],a]:r[o]=a}return r};class t{constructor({routeNames:e,loadingDraw:t,factoryRunner:n,showFunc:r,hideFunc:s}){this.namesToCareAbout={},(e||[]).forEach(e=>this.namesToCareAbout[e]=!0),this.loadingDraw=t,this.factoryRunner=n,this.showFunc=r,this.hideFunc=s,this.running=!1,this.stagedElements={}}mounted(){this.running=!0,s.repaint(this)}async show(r){if(this.namesToCareAbout[r]){let n=null;if(this.stagedElements[r])n=this.stagedElements[r];else{(n=document.createElement("div")).style.display="none",s.element(this).appendChild(n);let e=s.getFactory(r),t=(e instanceof Promise&&(e=await e),this.factoryRunner(r,e));t instanceof Promise&&(t=await t),s.mount(n,t),this.stagedElements[r]=n}this.currentElement&&(this.currentElement.style.display="none",this.hideFunc?.(s.get(this.currentElement.getAttribute("sux")))),n&&(n.style.display="block");r=s.get(n.getAttribute("sux"));r&&this.showFunc?.(r),this.currentElement=n}}draw(){return this.running?this.inny?"":`<div>${this.loadingDraw()}</div>`:this.loadingDraw()}}s.registerFactory("comp-swapper",e=>new t(e)),s.registerFactory("route-triggered-swapper",async e=>{return new class extends t{constructor(e){super(e),this.factoryRunner=async()=>{},this.showFunc=e=>{e._hasShown?e?.routeChanged?.(this.newHashPath,this.newRoute):e._hasShown=!0},this.hideFunc=e=>e?.routeHiding?.()}async whenRouting(n,r){this.factoryRunner=async(e,t)=>t(n,r),this.newHashPath=n,this.newRoute=r,this.show(r.name)}}(e)}),window.addEventListener("hashchange",s.route)})(sux||window.sux||{});