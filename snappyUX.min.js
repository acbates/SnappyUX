let sux=(o=>{let e=1e3,r=new Map,a=new Map,s=new Map,i=(o._compMap=r,o._dataMap=a,o._drawMap=s,o._createdDuringDraw=[],o.isElement=e=>e instanceof Element||e instanceof HTMLDocument,o.genId=()=>(++e).toString(36),o.get=e=>r.get(e),o.element=e=>{if(e)return(e="string"==typeof e?r.get(e):e).element||(e.element=document.querySelector('[sux="'+e.suxId+'"]'))},o.jq=e=>{if(e)return(e="string"==typeof e?r.get(e):e)._jq||(window.$?e._jq=$(o.element(e)):void 0)},o.register=n=>{n.suxId||(n.suxId=o.genId()),r.has(n.suxId)||(r.set(n.suxId,n),s.set(n.draw,n),o.when(n),n.data?.length?n.data.forEach(t=>{if("object"==typeof t&&!(t instanceof Date)){let e=a.get(t);e?e.push(n):a.set(t,e=[n])}}):n.data=[],o._createdDuringDraw.push(n))},e=>{let t=null;var n=e.findIndex(e=>"function"==typeof e);if(-1<n){var r=e[n];e.splice(n,1),t={suxId:o.genId(),draw:r,data:e}}else{if((n=e.findIndex(e=>"object"==typeof e&&e.draw))<-1)throw new Error("No component or draw function was passed to the mount.");t=e[n],e.splice(n,1)}return t}),n=(o.mount=(...e)=>{var t=e.findIndex(e=>"string"==typeof e||o.isElement(e));let n=null;if(n=-1<t&&(n=e[t],e.splice(t,1),"string"==typeof n)?document.getElementById(n):n)return(t=n.getAttribute("sux"))&&(o.clearKids(n),t=r.get(t))&&(t.cleared?.(),o.youDontSay(t)),(t=i(e)).inny=!0,o._createdDuringDraw=[t],o.register(t),n.setAttribute("sux",t.suxId),e=n.innerHTML=t.draw(...t.data),o.settle(),e;throw new Error("Element or id of element required to mount.")},o.inject=(...e)=>{e=i(e);return e.outy=!0,o.register(e),e.draw(...e.data).replace(">",` sux="${e.suxId}">`)},o.settle=()=>{var e=[...o._createdDuringDraw];o._createdDuringDraw=[],e.forEach(e=>e.mounted?e.mounted():null)},o.repaint=t=>{if(t){"string"==typeof t&&(t=r.get(t)),o.clearKids(t);var n=o.element(t);if(n){o._createdDuringDraw=[];let e=t.draw(...t.data);t.outy?(e=e.replace(">",` sux="${t.suxId}">`),n.outerHTML=e,delete t.element):n.innerHTML=e,o._createdDuringDraw.forEach(e=>e.mounted?e.mounted():null),o._createdDuringDraw=[]}else console.log("Element not found for "+t.suxId)}},o.touchData=t=>{var e;"object"!=typeof t||t instanceof Date||(e=a.get(t))&&e.forEach(e=>{e.dataTouched?e.dataTouched(t):o.repaint(e)})},o.replaceData=(n,r)=>{if(!("object"!=typeof n||n instanceof Date)){if("object"!=typeof r||r instanceof Date)throw new Error("Updating object to basic type is sadpanda.");var e=a.get(n);e&&e.forEach(e=>{var t;e.dataReplace?e.dataReplace(n,r):(-1<(t=e.data.indexOf(n))&&(e.data[t]=r),o.repaint(e))})}},o.clearKids=e=>{let t=null;if(!o.isElement(e))if(e?.suxId)t=o.element(e);else if(!(e="string"!=typeof e?e.suxId:e))return;(t=t||(o.isElement(e)?e:sux.element(e)))&&t.querySelectorAll("[sux]").forEach(e=>{e=e.getAttribute("sux");let n=r.get(e);n&&(r.delete(e),s.delete(n.draw),o.youDontSay(n),n.data?.length&&n.data.forEach(e=>{var t,e=a.get(e);e&&-1<(t=e.indexOf(n))&&e.splice(t,1)}),n.cleared)&&n.cleared()})},o.parent=e=>{if(!e)return null;let t=null,n=null;if(e.suxId?(e=(t=e).suxId,n=o.element(t)):"string"==typeof e&&(t=r.get(e)),t?.parent)return t?.parent;if(n||(o.isElement(e)?n=e:t?.element?n=t?.element:(n=document.querySelector('[sux="'+e+'"]'),t&&(t.element=n))),!(n=n||document.getElementById(e)))return null;for(n=n&&n.parentElement;n&&!n.getAttribute("sux");)n=n.parentElement;return n?((e=r.get(n.getAttribute("sux"))).element=n,t&&(t.parent=e),e):(console.log("PARENT NOT FOUND!"),null)},o.bundles={},o.loadPromises={},o.factories=new Map,o.requestedResources=new Map,o.routes=[],o.siteLoader=null,o.loadScript=n=>{var e=o.requestedResources.get(n);return e||(e=new Promise(e=>{var t=document.createElement("script");t.onload=()=>setTimeout(()=>e(),50),t.type="text/javascript",t.src=n,document.head.appendChild(t)}),o.requestedResources.set(n,e)),e},o.loadStylesheet=e=>{var t;o.requestedResources.has(e)||(o.requestedResources.set(e,Promise.resolve()),(t=document.createElement("link")).rel="stylesheet",t.href=e,document.head.appendChild(t))},o._loadBundle=async e=>{var t=o.bundles[e];t.style&&o.loadStylesheet(t.style);let n=t.source;if(Array.isArray(n)||(n=[n]),await Promise.allSettled(n.map(e=>o.loadScript(e))),o.factories.has(e))return o.factories.get(e);throw new Error("Bundle did not register a factory.")},o.registerFactory=(e,t)=>{o.factories.set(e,(...e)=>{e=t(...e);return o.register(e),e})},o.getFactory=async(...e)=>{e=e.shift();return o.factories.has(e)?o.factories.get(e):o.loadPromises[e]||(o.loadPromises[e]=o._loadBundle(e))},o.loadBundles=n=>{o.bundles=n;let t=Object.keys(n);t.forEach(e=>{var t=n[e];t?.route&&(t.name=e,o.routes.push(t))}),o.siteLoader||(o.siteLoader=setTimeout(async()=>{for(var e of t)await o._loadBundle(e)},1e3))},o.go=e=>{document.location="#"+e},o.onclickGo=e=>o.eventAttr("onclick",()=>o.go(e)),o.route=async t=>{"#"===(t=(t=t&&"object"==typeof t&&t.newURL?window.location.hash:t)||(window.location.hash||"#home")+"")[0]&&(t=t.substring(1));var e=o.routes.find(e=>e.route.test(t));o.routes.forEach(e=>e.route.lastIndex=0),e?o.say("Routing",t,e):console.log("No route found for "+t+"!")},{});return o.event=e=>{var t=o.genId();return n[t]=e,"sux._event('"+t+"')"},o._event=e=>{n[e]()},o.eventAttr=(e,t)=>" "+e+'="'+o.event(t)+'" ',o.onclick=e=>o.eventAttr("onclick",e),o.onchange=e=>o.eventAttr("onchange",e),o.onsubmit=e=>o.eventAttr("onsubmit",e),o.onmouseover=e=>o.eventAttr("onmouseover",e),o.onmouseout=e=>o.eventAttr("onmouseout",e),o.http=(o,a,s,i)=>new Promise((t,n)=>{var e,r={method:a,headers:{"Content-Type":"application/json",...i||{}}};"POST"===a?r.body=JSON.stringify(s||{}):"GET"===a&&s&&(e=Object.keys(s).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(s[e])).join("&"),o=(o.includes("?")?"&":"?")+e),fetch(o,r).then(async e=>{(e.ok?t:n)(await e.json())})}),o.httpPost=async(e,t,n,r)=>{return!e.endsWith("/")&&t&&(e+="/"),o.http(e+(t||""),"POST",n,r)},o.httpGet=async(e,t,n,r)=>{return!e.endsWith("/")&&t&&(e+="/"),o.http(e+(t||""),"GET",n,r)},o.setupApi=t=>{Object.keys(t).forEach(e=>{let r=t[e];o[e]||(o[e]={post:async(e,t,n)=>sux.httpPost(r.hostPath,e,t,n),get:async(e,t,n)=>sux.httpGet(r.hostPath,e,t,n)})})},o.parseQstring=e=>{if(!e){if(1===(e=(document.location+"").split("#")[0].split("?")).length)return{};e=e[1]}var t=e=>decodeURIComponent((e+"").replace(/\+/g,"%20")),n=e.split("&"),r={};for(let e=0;e<n.length;e++){var o=n[e].split("="),a=t(o[0]),s=t(o[1]||"");r[o[0]]?Array.isArray(r[a])?r[a].push(s):r[a]=[r[a],s]:r[a]=s}return r},o._sayWhenListeners={},o._whenObjects=new Map,o.when=(t,n)=>{if("string"==typeof t){let e=o._sayWhenListeners[t];(e=e||(o._sayWhenListeners[t]=[])).push(n)}else if("object"==typeof t){let n=t,r=[];Object.keys(n).forEach(t=>{var e;4<t.length&&t.startsWith("when")&&(e={k:t,h:(...e)=>n[t](...e)},r.push(e),o.when(t.substring(4),e.h))}),r.length&&o._whenObjects.set(n,r)}},o.say=(e,...t)=>{(o._sayWhenListeners[e]||[]).forEach(e=>e(...t))},o.youDontSay=(e,t)=>{var n;e&&("string"==typeof e?(n=o._sayWhenListeners[e])&&(-1<(t=n.indexOf(t))&&n.splice(t,1),0===n.length)&&delete o._sayWhenListeners[e]:"object"==typeof e&&(t=o._whenObjects.get(e))&&(console.log("clearing handlers for object..."),t.forEach(e=>{o.youDontSay(e.k,e.h)}),o._whenObjects.delete(e)))},o.bodySnatch=(e,t)=>{for(var n in e)delete e[n];Object.assign(e,t),o.touchData(e)},window.addEventListener("hashchange",o.route),o})({});class SuxProxy{repaint(){return sux.repaint(this)}onclick(e){return sux.onclick(e)}}new SuxProxy;