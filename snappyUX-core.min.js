let sux=(a=>{let e=1e3,r=new Map,o=new Map,s=new Map,l=(a._compMap=r,a._dataMap=o,a._drawMap=s,a._createdDuringDraw=[],a.isElement=e=>e instanceof Element||e instanceof HTMLDocument,a.genId=()=>(++e).toString(36),a.get=e=>r.get(e),a.element=e=>{if(e)return(e="string"==typeof e?r.get(e):e).element||(e.element=document.querySelector('[sux="'+e.suxId+'"]'))},a.jq=e=>{if(e)return(e="string"==typeof e?r.get(e):e)._jq||(window.$?e._jq=$(a.element(e)):void 0)},a.register=n=>{n.suxId||(n.suxId=a.genId()),r.has(n.suxId)||(r.set(n.suxId,n),s.set(n.draw,n),a.when(n),n.data?.length?n.data.forEach(t=>{if("object"==typeof t&&!(t instanceof Date)){let e=o.get(t);e?e.push(n):o.set(t,e=[n])}}):n.data=[],a._createdDuringDraw.push(n))},e=>{let t=null;var n=e.findIndex(e=>"function"==typeof e);if(-1<n){var r=e[n];e.splice(n,1),t={suxId:a.genId(),draw:r,data:e}}else{if((n=e.findIndex(e=>"object"==typeof e&&e.draw))<-1)throw new Error("No component or draw function was passed to the mount.");t=e[n],e.splice(n,1)}return t}),n=(a.mount=(...e)=>{var t=e.findIndex(e=>"string"==typeof e||a.isElement(e));let n=null;if(n=-1<t&&(n=e[t],e.splice(t,1),"string"==typeof n)?document.getElementById(n):n)return(t=n.getAttribute("sux"))&&(a.clearKids(n),t=r.get(t))&&(t.cleared?.(),a.youDontSay(t)),(t=l(e)).inny=!0,a._createdDuringDraw=[t],a.register(t),n.setAttribute("sux",t.suxId),e=n.innerHTML=t.draw(...t.data),a.settle(),e;throw new Error("Element or id of element required to mount.")},a.inject=(...e)=>{e=l(e);return e.outy=!0,a.register(e),e.draw(...e.data).replace(">",` sux="${e.suxId}">`)},a.settle=()=>{var e=[...a._createdDuringDraw];a._createdDuringDraw=[],e.forEach(e=>e.mounted?e.mounted():null)},a.repaint=t=>{if(t){"string"==typeof t&&(t=r.get(t)),a.clearKids(t);var n=a.element(t);if(n){a._createdDuringDraw=[];let e=t.draw(...t.data);t.outy?(e=e.replace(">",` sux="${t.suxId}">`),n.outerHTML=e,delete t.element):n.innerHTML=e,a._createdDuringDraw.forEach(e=>e.mounted?e.mounted():null),a._createdDuringDraw=[]}else console.log("Element not found for "+t.suxId)}},a.touchData=t=>{var e;"object"!=typeof t||t instanceof Date||(e=o.get(t))&&e.forEach(e=>{e.dataTouched?e.dataTouched(t):a.repaint(e)})},a.replaceData=(n,r)=>{if(!("object"!=typeof n||n instanceof Date)){if("object"!=typeof r||r instanceof Date)throw new Error("Updating object to basic type is sadpanda.");var e=o.get(n);e&&e.forEach(e=>{var t;e.dataReplace?e.dataReplace(n,r):(-1<(t=e.data.indexOf(n))&&(e.data[t]=r),a.repaint(e))})}},a.clearKids=e=>{let t=null;if(!a.isElement(e))if(e?.suxId)t=a.element(e);else if(!(e="string"!=typeof e?e.suxId:e))return;(t=t||(a.isElement(e)?e:sux.element(e)))&&t.querySelectorAll("[sux]").forEach(e=>{e=e.getAttribute("sux");let n=r.get(e);n&&(r.delete(e),s.delete(n.draw),a.youDontSay(n),n.data?.length&&n.data.forEach(e=>{var t,e=o.get(e);e&&-1<(t=e.indexOf(n))&&e.splice(t,1)}),n.cleared)&&n.cleared()})},a.parent=e=>{if(!e)return null;let t=null,n=null;if(e.suxId?(e=(t=e).suxId,n=a.element(t)):"string"==typeof e&&(t=r.get(e)),t?.parent)return t?.parent;if(n||(a.isElement(e)?n=e:t?.element?n=t?.element:(n=document.querySelector('[sux="'+e+'"]'),t&&(t.element=n))),!(n=n||document.getElementById(e)))return null;for(n=n&&n.parentElement;n&&!n.getAttribute("sux");)n=n.parentElement;return n?((e=r.get(n.getAttribute("sux"))).element=n,t&&(t.parent=e),e):(console.log("PARENT NOT FOUND!"),null)},a.registerFactory=(e,t)=>{a.factories.set(e,(...e)=>{e=t(...e);return a.register(e),e})},a.getFactory=async(...e)=>{e=e.shift();return a.factories.has(e)?a.factories.get(e):a.loadPromises[e]||(a.loadPromises[e]=a._loadBundle(e))},{});return a.event=e=>{var t=a.genId();return n[t]=e,"sux._event('"+t+"')"},a._event=e=>{n[e]()},a.eventAttr=(e,t)=>" "+e+'="'+a.event(t)+'" ',a.onclick=e=>a.eventAttr("onclick",e),a.onchange=e=>a.eventAttr("onchange",e),a.onsubmit=e=>a.eventAttr("onsubmit",e),a.onmouseover=e=>a.eventAttr("onmouseover",e),a.onmouseout=e=>a.eventAttr("onmouseout",e),a._sayWhenListeners={},a._whenObjects=new Map,a.when=(t,n)=>{if("string"==typeof t){let e=a._sayWhenListeners[t];(e=e||(a._sayWhenListeners[t]=[])).push(n)}else if("object"==typeof t){let n=t,r=[],e=null;(e="Object"===t.constructor?.name?Object.keys(t):Object.getOwnPropertyNames(Object.getPrototypeOf(t)))?.forEach(t=>{var e;4<t.length&&t.startsWith("when")&&(e={k:t,h:(...e)=>n[t](...e)},r.push(e),a.when(t.substring(4),e.h))}),r.length&&a._whenObjects.set(n,r)}},a.say=(e,...t)=>{(a._sayWhenListeners[e]||[]).forEach(e=>e(...t))},a.youDontSay=(e,t)=>{var n;e&&("string"==typeof e?(n=a._sayWhenListeners[e])&&(-1<(t=n.indexOf(t))&&n.splice(t,1),0===n.length)&&delete a._sayWhenListeners[e]:"object"==typeof e&&(t=a._whenObjects.get(e))&&(console.log("clearing handlers for object..."),t.forEach(e=>{a.youDontSay(e.k,e.h)}),a._whenObjects.delete(e)))},a.bodySnatch=(e,t)=>{for(var n in e)delete e[n];Object.assign(e,t),a.touchData(e)},a})({});