let sux=(s=>{Array.prototype.rip=function(t){var n=[];for(let e=this.length-1;0<=e;e--)t(this[e])&&(n.push(this[e]),this.splice(e,1));return n.reverse()},Array.prototype.ripOne=function(t){for(let e=this.length-1;0<=e;e--){var n;if(t(this[e]))return n=this[e],this.splice(e,1),n}return null};let e=1e3,r=new Map,o=new Map,a=new Map,u=(s._compMap=r,s._dataMap=o,s._drawMap=a,s._createdDuringDraw=[],s.isElement=e=>e instanceof Element||e instanceof HTMLDocument,s.genId=()=>(++e).toString(36),s.get=e=>r.get(e),s.element=e=>{if(e)return(e="string"==typeof e?r.get(e):e).element||(e.element=document.querySelector('[sux="'+e.suxId+'"]'))},s.jq=e=>{if(e)return(e="string"==typeof e?r.get(e):e)._jq||(window.$?e._jq=$(s.element(e)):void 0)},s.register=n=>{n.suxId||(n.suxId=s.genId()),r.has(n.suxId)||(r.set(n.suxId,n),a.set(n.draw,n),s.when(n),n.data?.length?n.data.forEach(t=>{if("object"==typeof t&&!(t instanceof Date)){let e=o.get(t);e?e.push(n):o.set(t,e=[n])}}):n.data=[],s._createdDuringDraw.push(n))},e=>{let t=null;var n=e.findIndex(e=>"function"==typeof e);if(-1<n){var r=e[n];e.splice(n,1),t={suxId:s.genId(),draw:r,data:e}}else{if((n=e.findIndex(e=>"object"==typeof e&&e.draw))<-1)throw new Error("No component or draw function was passed to the mount.");t=e[n],e.splice(n,1)}return t}),i=(s.mount=(...e)=>{var t=e.findIndex(e=>"string"==typeof e||s.isElement(e));let n=null;if(n=-1<t&&(n=e[t],e.splice(t,1),"string"==typeof n)?document.getElementById(n):n)return(t=n.getAttribute("sux"))&&(s.clearKids(n),t=r.get(t))&&(t.cleared?.(),s.youDontSay(t)),(t=u(e)).inny=!0,s._createdDuringDraw=[t],s.register(t),n.setAttribute("sux",t.suxId),e=n.innerHTML=t.draw(...t.data),s.settle(),e;throw new Error("Element or id of element required to mount.")},s.inject=(...e)=>{e=u(e);return e.outy=!0,s.register(e),e.draw(...e.data).replace(">",` sux="${e.suxId}">`)},s.settle=()=>{var e=[...s._createdDuringDraw];s._createdDuringDraw=[],e.forEach(e=>e.mounted?e.mounted():null)},s.repaint=t=>{if(t){"string"==typeof t&&(t=r.get(t)),s.clearKids(t);var n=s.element(t);if(n){s._createdDuringDraw=[];let e=t.draw(...t.data);t.outy?(e=e.replace(">",` sux="${t.suxId}">`),n.outerHTML=e,delete t.element):n.innerHTML=e,s._runMounts(n),s._createdDuringDraw.forEach(e=>e.mounted?e.mounted():null),s._createdDuringDraw=[]}else console.log("Element not found for "+t.suxId)}},s.touchData=t=>{var e;"object"!=typeof t||t instanceof Date||(e=o.get(t))&&e.forEach(e=>{e.dataTouched?e.dataTouched(t):s.repaint(e)})},s.replaceData=(n,r)=>{if(!("object"!=typeof n||n instanceof Date)){if("object"!=typeof r||r instanceof Date)throw new Error("Updating object to basic type is sadpanda.");var e=o.get(n);e&&e.forEach(e=>{var t;e.dataReplace?e.dataReplace(n,r):(-1<(t=e.data.indexOf(n))&&(e.data[t]=r),s.repaint(e))})}},s.clearKids=e=>{let t=null;if(!s.isElement(e))if(e?.suxId)t=s.element(e);else if(!(e="string"!=typeof e?e.suxId:e))return;(t=t||(s.isElement(e)?e:sux.element(e)))&&(s._clearMounts(t),t.querySelectorAll("[sux]").forEach(e=>{e=e.getAttribute("sux");let n=r.get(e);n&&(r.delete(e),a.delete(n.draw),s.youDontSay(n),n.data?.length&&n.data.forEach(e=>{var t,e=o.get(e);e&&-1<(t=e.indexOf(n))&&e.splice(t,1)}),n.cleared)&&n.cleared()}))},s.parent=e=>{if(!e)return null;let t=null,n=null;if(e.suxId?(e=(t=e).suxId,n=s.element(t)):"string"==typeof e&&(t=r.get(e)),t?.parent)return t?.parent;if(n||(s.isElement(e)?n=e:t?.element?n=t?.element:(n=document.querySelector('[sux="'+e+'"]'),t&&(t.element=n))),!(n=n||document.getElementById(e)))return null;for(n=n&&n.parentElement;n&&!n.getAttribute("sux");)n=n.parentElement;return n?((e=r.get(n.getAttribute("sux"))).element=n,t&&(t.parent=e),e):(console.log("PARENT NOT FOUND!"),null)},s.registerFactory=(e,t)=>{s.factories.set(e,(...e)=>{e=t(...e);return s.register(e),e})},s.getFactory=async(...e)=>{e=e.shift();return s.factories.has(e)?s.factories.get(e):s.loadPromises[e]||(s.loadPromises[e]=s._loadBundle(e))},{}),l=(s.event=e=>{var t=s.genId();return i[t]=e,"sux._event('"+t+"', this, event)"},s._event=(e,t,n)=>{i[e](t,n)},s.eventAttr=(e,t)=>" "+e+'="'+s.event(t)+'" ',s.onclick=e=>s.eventAttr("onclick",e),s.onchange=e=>s.eventAttr("onchange",e),s.onsubmit=e=>s.eventAttr("onsubmit",e),s.onmouseover=e=>s.eventAttr("onmouseover",e),s.onmouseout=e=>s.eventAttr("onmouseout",e),s._mountRefs={},s.mountFunc=e=>{var t=s.genId();return s._mountRefs[t]=e,' sux_mref="'+t+'" '},s._runMounts=e=>{(e=e||document).querySelectorAll("[sux_mref]").forEach(e=>{var t,n=e.getAttribute("sux_mref");s._mountRefs[n]&&(t=s._mountRefs[n],delete s._mountRefs[n],e.removeAttribute("sux_mref"),t(e))})},s._clearMounts=e=>{e&&e.querySelectorAll("[sux_mref]").forEach(e=>{var t=e.getAttribute("sux_mref");e.removeAttribute("sux_mref"),delete s._mountRefs[t]})},s.bind=a=>{if(a){let{event:t,draw:e,to:n,from:r}=a;a=e?e():s.mountFunc(n);let o=null;return"string"==typeof t?o=s.eventAttr(t,r):"object"==typeof t&&(o=Object.keys(t).map(e=>s.eventAttr(e,t[e])).join(" ")),a+o}},e=>1===e.length?e[0]:{prop:e.ripOne(e=>"string"==typeof e),obj:e.ripOne(e=>"object"==typeof e)});return s.bindValueChange=(...e)=>{if(e){let{prop:t,obj:n,to:r,from:o}=l(e);return s.bind({event:{onchange:e=>n[t]=o?o(e.value):e.value},to:e=>e.value=r?r(n[t]):n[t]})}},s.bindCheckedChange=(...a)=>{if(a){let{prop:t,obj:n,to:e,from:r}=l(a),o=e?e(n[t]):n[t];return s.bind({event:"onchange",draw:()=>o?" checked ":"",from:e=>n[t]=r?r(e.checked):e.checked})}},s._sayWhenListeners={},s._whenObjects=new Map,s.when=(t,n)=>{if("string"==typeof t){let e=s._sayWhenListeners[t];(e=e||(s._sayWhenListeners[t]=[])).push(n)}else if("object"==typeof t){let n=t,r=[],e=null;(e="Object"===t.constructor?.name?Object.keys(t):Object.getOwnPropertyNames(Object.getPrototypeOf(t)))?.forEach(t=>{var e;4<t.length&&t.startsWith("when")&&(e={k:t,h:(...e)=>n[t](...e)},r.push(e),s.when(t.substring(4),e.h))}),r.length&&s._whenObjects.set(n,r)}},s.say=(e,...t)=>{(s._sayWhenListeners[e]||[]).forEach(e=>e(...t))},s.youDontSay=(e,t)=>{var n;e&&("string"==typeof e?(n=s._sayWhenListeners[e])&&(-1<(t=n.indexOf(t))&&n.splice(t,1),0===n.length)&&delete s._sayWhenListeners[e]:"object"==typeof e&&(t=s._whenObjects.get(e))&&(console.log("clearing handlers for object..."),t.forEach(e=>{s.youDontSay(e.k,e.h)}),s._whenObjects.delete(e)))},s.bodySnatch=(e,t)=>{for(var n in e)delete e[n];Object.assign(e,t),s.touchData(e)},s})({});